#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.dirname(File.expand_path('..', __FILE__)))

require 'models/chef_configuration'
require 'models/chef_executor'

# prepare the node
conf = ChefConfiguration.new
conf.prepare

# apply appstage configuration
chef = ChefExecutor.new conf
chef.run (:node_object => { :data => ENV['NODE'] })
